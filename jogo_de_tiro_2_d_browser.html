<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Jogo de Tiro Mobile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">

  <style>
    body { margin: 0; background: #111; color: #fff; font-family: Arial; text-align: center; touch-action: none; }
    canvas { background: #000; display: block; margin: 10px auto; border: 2px solid #444; }
    .info { font-size: 14px; }
  </style>
</head>
<body>
  <h3>ðŸ”« Jogo de Tiro Mobile</h3>
  <p class="info">Arraste o dedo para mover | Toque para atirar</p>
  <canvas id="game" width="360" height="600"></canvas>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    let player = { x: 160, y: 520, w: 40, h: 40 };
    let bullets = [];
    let enemies = [];
    let score = 0;

    // CONTROLE POR TOQUE
    canvas.addEventListener('touchmove', e => {
      const touch = e.touches[0];
      const rect = canvas.getBoundingClientRect();
      player.x = touch.clientX - rect.left - player.w / 2;
    });

    canvas.addEventListener('touchstart', () => {
      bullets.push({ x: player.x + 18, y: player.y });
    });

    function spawnEnemy() {
      enemies.push({ x: Math.random() * 330, y: -30, size: 30 });
    }

    function update() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Player
      ctx.fillStyle = 'cyan';
      ctx.fillRect(player.x, player.y, player.w, player.h);

      // Bullets
      ctx.fillStyle = 'yellow';
      bullets.forEach((b, i) => {
        b.y -= 8;
        ctx.fillRect(b.x, b.y, 4, 10);
        if (b.y < 0) bullets.splice(i, 1);
      });

      // Enemies
      ctx.fillStyle = 'red';
      enemies.forEach((e, ei) => {
        e.y += 3;
        ctx.fillRect(e.x, e.y, e.size, e.size);
        if (e.y > canvas.height) enemies.splice(ei, 1);

        bullets.forEach((b, bi) => {
          if (b.x < e.x + e.size && b.x + 4 > e.x && b.y < e.y + e.size && b.y + 10 > e.y) {
            enemies.splice(ei, 1);
            bullets.splice(bi, 1);
            score++;
          }
        });
      });

      ctx.fillStyle = 'white';
      ctx.fillText('Score: ' + score, 10, 20);

      requestAnimationFrame(update);
    }

    setInterval(spawnEnemy, 900);
    update();
  </script>
</body>
</html>
